---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPostMenu from '../components/BlogPostMenu.astro';
import Pagination from '../components/Pagination.astro';


interface MarkdownFrontmatter {
  date: number;
  image: string;
  author: any;
}

let title = 'Blog';
let description = 'Test Blog';
const canonicalURL = new URL(Astro.url.pathname, Astro.site);

// Data Fetching: List all Markdown posts in the repo.
let allPosts = await Astro.glob<MarkdownFrontmatter>('./post/*.md');
allPosts = allPosts.sort(
  (a, b) =>
    new Date(b.frontmatter.date).valueOf() -
    new Date(a.frontmatter.date).valueOf()
);
let firstPage = allPosts.slice(0, 2);
---

<BaseLayout description={description} title={title}>
  <BlogPostMenu posts={allPosts} />
  <!-- {allPosts.map((post) => <PostPreview post={post} author={authorData[post.frontmatter.author]} />)} -->
</BaseLayout>

<!-- <footer>
	<Pagination prevUrl="/posts" nextUrl="/posts/2" />
</footer> -->
