---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogPost from '../../components/BlogPost.astro';
import { MarkdownFrontmatter } from '../index.astro';

const { post } = Astro.props;
const { description, title } = post;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);

export async function getStaticPaths() {
  const allPosts = await Astro.glob<MarkdownFrontmatter>('/data/posts/*.md');
  return allPosts.map((post) => ({
    params: {
      slug: post.frontmatter.slug
    },
    props: { post }
  }));
}
---

<BaseLayout
  description={description}
  tags={post.frontmatter.categories}
  title={title}
>
  <BlogPost canonicalURL={canonicalURL} post={post} />
</BaseLayout>
